(()=>{var c=class{constructor(e,t,n){this.x=0;this.y=0;this.width=e,this.height=t,this.scene=n}focusOn(e,t,n,s){this.x=e-this.width/2,this.y=t-this.height/2,this.x=Math.max(0,Math.min(this.x,n-this.width)),this.y=Math.max(0,Math.min(this.y,s-this.height))}updateAndRender(e,t){t.clearRect(0,0,t.canvas.width,t.canvas.height),this.scene.gameObjects.forEach(n=>{let s=n.x-this.x,a=n.y-this.y;s+this.width>=0&&s<=this.width&&a+this.height>=0&&a<=this.height&&(n.update(e),n.render(t))})}};var h=class{constructor(e){this.lastTime=0;this.currentCamera=null;let t=document.getElementById(e),n=t.getContext("2d");if(!n)throw new Error("Unable to get canvas rendering context.");this.canvas=t,this.ctx=n,this.callbacks=[]}start(){requestAnimationFrame(this.gameLoop.bind(this))}gameLoop(e){let t=(e-this.lastTime)/1e3;this.lastTime=e,this.currentCamera&&this.currentCamera.updateAndRender(t,this.ctx),this.callbacks&&this.callbacks.forEach(n=>n(t)),requestAnimationFrame(this.gameLoop.bind(this))}changeCamera(e){this.currentCamera=e}addCallback(e){this.callbacks.push(e)}getCanvas(){return this.canvas}};var u={};window.addEventListener("keydown",i=>{u[i.code]=!0});window.addEventListener("keyup",i=>{u[i.code]=!1});var r={x:0,y:0,clicked:!1};function p(i,e){i.addEventListener("click",t=>{let n=i.getBoundingClientRect(),s=t.clientX-n.left,a=t.clientY-n.top;r.x=s+e.x,r.y=a+e.y,r.clicked=!0})}var m=class{constructor(e,t){this.width=e,this.height=t,this.gameObjects=[]}addGameObject(e){this.gameObjects.push(e)}removeGameObject(e){let t=this.gameObjects.indexOf(e);console.log(t),console.log(JSON.stringify(e)),console.log(JSON.stringify(this.gameObjects)),t!==-1&&this.gameObjects.splice(t,1)}};var d=class{letter;speed;sound;x;y;zIndex;destroy;constructor(e,t,n,s,a,o){this.x=t,this.y=n,this.letter=e,this.speed=s,this.destroy=o,this.sound=new Audio(a)}update(e){if(this.y+=this.speed*e,this.y>600&&this.destroy(this),r.clicked){let t=r.x>=this.x-50&&r.x<=this.x+50,n=r.y>=this.y-50&&r.y<=this.y+50;t&&n&&(this.playSound(),this.destroy(this))}}render(e){e.fillStyle="black",e.font="30px Arial",e.fillText(this.letter,this.x,this.y)}playSound(){this.sound.play()}};var l=class{engine;scene;letters;lastSpawnTime;spawnInterval;constructor(e,t){this.engine=e,this.scene=t,this.letters="abcdefghijklmnopqrstuvwxyz".split(""),this.lastSpawnTime=0,this.spawnInterval=3}start(){this.engine.addCallback(e=>this.update(e))}update(e){this.lastSpawnTime+=e,this.lastSpawnTime>=this.spawnInterval&&(this.spawnLetter(),this.lastSpawnTime=0)}spawnLetter(){let e=this.letters[Math.floor(Math.random()*this.letters.length)],t=Math.random()*750,n=50+Math.random()*60,s="assets/sounds/a.mp3",a=new d(e,t,0,n,s,o=>this.scene.removeGameObject(o));this.scene.addGameObject(a)}};window.addEventListener("load",()=>{let i=new h("gameCanvas"),e=i.getCanvas(),t=e.width,n=e.height,s=new m(t,n),a=new c(t,n,s);p(e,a),new l(i,s).start(),i.changeCamera(a),i.start()});})();
/**
 * @author       Georgii Kharlampiiev <georgii@artcraft.games>
 * @copyright    2024 ArtCraft Supplies Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */
